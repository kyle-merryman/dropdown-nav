<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Follow Along Nav</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <h2>Welcome to Kyle Merryman's Dropdown Project</h2>
  <nav class="top">
    <div class="dropdownBackground">
      <span class="arrow"></span>
    </div>

    <ul class="cool">
      <li>
        <a href="#">About Me</a>
        <div class="dropdown dropdown1">
          <div class="bio">
            <img src="image/portrait.jpg">
            <p>Kyle Merryman is a multimedia content creator. Kyle has generated websites, applications and documentary shorts for multiple clients and employers. Kyle is constantly updating their toolset with a variety of front and back-end programming skills. Kyle is drawn to work which aligns with their passion for sharing culturally nuanced stories, interest in utilizing new technologies, and experience with both video editing and ethnographic research.</p>
          </div>
        </div>
      </li>
      <li>
        <a href="#">Portfolio</a>
        <ul class="dropdown courses">
          <li>
            <span class="code">Space Trivia</span>
            <a href="https://kyle-merryman.github.io/space-trivia/">Think you know Space? Quiz yourself!</a>
          </li>
          <li>
            <span class="code">Text2Speech</span>
            <a href="https://kyle-merryman.github.io/text-to-speech/">A robot will say what you want to hear.</a>
          </li>
          <li>
            <span class="code">MyCanvas</span>
            <a href="https://kyle-merryman.github.io/canvas/">Create your art! You can save it as a PNG.</a>
          </li>
          <li>
            <span class="code">Whatimeizit</span>
            <a href="https://kyle-merryman.github.io/clock-analog/">Check the time on your own analog watch.</a>
          </li>
          <li>
            <span class="code">Fore!Cast</span>
            <a href="https://lindsayt13.github.io/Project_1/">Schedule & map your appts around the weather.</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#">Other Links</a>
        <ul class="dropdown dropdown3">
          <li><a class="button" href="https://www.linkedin.com/in/kyle-merryman/">LinkedIn</a></li>
          <li><a class="button" href="https://kyle-merryman.github.io/me/">My Site</a></li>
          <li><a class="button" href="https://github.com/kyle-merryman/">GitHub</a></li>
        </ul>
      </li>
    </ul>
  </nav>

<script>
    const triggers = document.querySelectorAll('.cool > li');
    const background = document.querySelector('.dropdownBackground');
    const nav = document.querySelector('.top');


    function handleEnter() {
        //console.log('enter');
        this.classList.add('trigger-enter');
        //arrow notation inherits "this" value, adds class after 150ms
        setTimeout(() => this.classList.contains('trigger-enter') && this.classList.add('trigger-enter-active'), 150);
        background.classList.add("open");

        const dropdown = this.querySelector('.dropdown');
        const dropdownCoords = dropdown.getBoundingClientRect();
        const navCoords = nav.getBoundingClientRect();
        //console.log(dropdownCoords);
        //console.log(navCoords);

        const coords = {
            height: dropdownCoords.height,
            width: dropdownCoords.width,
            top: dropdownCoords.top - navCoords.top,
            left: dropdownCoords.left - navCoords.left,
        };

        background.style.setProperty('width', `${coords.width}px`);
        background.style.setProperty('height', `${coords.height}px`);
        background.style.setProperty('transform', `translate(${coords.left}px, ${coords.top}px)`);

    }

    function handleLeave() {
        this.classList.remove('trigger-enter');
        //arrow notation inherits "this" value, removes class after 150ms
        setTimeout(() => this.classList.remove('trigger-enter-active'), 150);
        background.classList.remove("open"); 
        //console.log('leave');
    }

    //hover event triggers -> activates handleEnter() & handleLeave() functions
    triggers.forEach(trigger => trigger.addEventListener('mouseenter', handleEnter));
    triggers.forEach(trigger => trigger.addEventListener('mouseleave', handleLeave));
</script>

</body>
</html>